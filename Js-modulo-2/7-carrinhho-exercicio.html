<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <style>
        section {
            display: flex;
            align-items: left;
            justify-content: center;
            gap: 2rem;
        }
    </style>
</head>
<body>
    <main>

        <h2>Carrinho de compra</h2>

        <p>Os itens são 5, e estão listados no JS. Ao clicar no botão ele vai imprimir o valor atual, valor com desconto de 10% para itens acima de R$30,00, e mostrará o resultado no final</p>

        <button>clique</button>

        <section>
            <label>Preço<p class="car"></p></label>
            <label>Desconto<p class="price"></p></label>
            <label>Total<p class="tot"></p></label>
        </section>

    </main>
</body>
<script>

    const button = document.querySelector('button')
    const car = document.querySelector('.car')
    const price = document.querySelector('.price')
    const tot = document.querySelector('.tot')

        //produtos que serão calculados pois estão no carrinho
    const products = [
        {
            name: 'Marcarrão',
            price: 10
        },
        {
            name: 'Molho de tomate',
            price: 5
        },
        {
            name: 'Carne moida (Kg)',
            price: 33
        },
        {
            name: 'Queijo (Kg)',
            price: 90
        },
        {
            name: 'Coca-cola 3L',
            price: 12
        }
    ]

    const product = products
    
    //Mostra na tela as compras com valores normais
    function carDisplay() {
        let x
        let y
        //imprimir na tela, valores em tabela
        for (let i = 0; i < products.length; i++) {
            x = products[i].name
            y = products[i].price
            car.innerHTML += ` ${x} || R$ ${y} <br>`
            console.log(x + ' : ' + y)
        }
        
        console.log('validar car')
    }

    //Mostra a tabela de itens com os descontos aplicados
    function priceDisplay() {
        //estou usando uma variavel para chamar a função. Talvez não seria necessário dela, e somente deixar o "discount()"
        discount()
        let x
        let y
        //imprimir na tela, vcalores em tabela
        for (let i = 0; i < products.length; i++) {
            x = products[i].name
            y = products[i].price
            price.innerHTML += ` ${x} || R$ ${y} <br>`
            console.log(x + ' : ' + y)
        }
        
        console.log('validar price')
    }


    //mostra o total na tela COM DESCONTO
    function totDisplay() {
        //Estou chamando uma função atevez da variavel, para mostrar o total na tela
        //const newTotal = subTotal()
        //const oldTotal = oldSubTotal()
        tot.innerHTML = ` R$ ${oldSubTotal()} <br>` 
        discount()
        tot.innerHTML += `R$ ${subTotal()} (COM DESCONTO)<br>`

    
        console.log('validar tot')
    }

    //chammada de evento para mostrar na tela os valores de R$"atual, desconto, total"

    button.addEventListener('click', carDisplay)
    
    button.addEventListener('click', totDisplay)
    button.addEventListener('click', priceDisplay)

    
function discount() {
    let i = 0
    let myArray = []
    while (i < product.length) {
            
        //Desconto sendo aplicado em cada item do array acima de 30$
        myArray[i] = product[i].price
        if (product[i].price > 30) {
            product[i].price = product[i].price - product[i].price / 10
            myArray[i] = product[i].price
        }
        i++
    }
    //return myArray
}

function subTotal() {
    let total = 0
    for (let i=0; i < products.length ;i++) {
        total+=products[i].price // total = total + preço do produto na posição i
        console.log(total + ' - ' + i )
    }
    return total
}

function oldSubTotal() {
    let oldTotal = 0
    for (let i=0; i < product.length ;i++) {
        oldTotal+=product[i].price // total = total + preço do produto na posição i
        console.log(oldTotal + ' + ' + i )
    }
    return oldTotal
}

//console.log(products[1].price)
//const cart = discount()
//const total = subTotal()

//console.log( cart)





</script>
</html>